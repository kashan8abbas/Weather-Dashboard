<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weather Dashboard - Tables</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      display: flex;
      height: 100vh;
      font-family: 'Poppins', sans-serif; 
      background-color: #f5f6fa;
    }


    .side-menu {
      width: 20%;
      background: linear-gradient(180deg, #2c3e50, #34495e);
      color: white;
      padding: 30px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
    }

    .side-menu h2 {
      font-size: 1.8rem;
      margin-bottom: 40px;
      text-align: center; 
    }

    .side-menu nav ul {
      list-style-type: none;
      width: 100%;
    }

    .side-menu nav ul li {
      margin: 20px 0;
    }

    .side-menu nav ul li a {
      color: white;
      text-decoration: none;
      font-size: 1.2rem;
      padding: 10px;
      display: block;
      text-align: center;
      transition: background-color 0.3s ease;
    }

    .side-menu nav ul li a:hover {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 8px;
    }

    
    .main-content {
      width: 80%;
      padding: 20px;
      background-color: #3e829f;
      background-size: cover;
      background-position: center; 
      background-repeat: no-repeat; 
      overflow-y: auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 20%;
      font-size: 2.5rem;
      color: #2c3e50;
    }

    /* Input Section */
    .input-section {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 89px;
    }

    .input-section input {
      
      padding: 8px;
      width: 650px;
      border: 1px solid #2c1d1d;
      border-radius: 5px;
      font-size: 1rem;
    }

    .input-section button {
      padding: 15px 25px;
      background: linear-gradient(180deg, #2c3e50, #34495e);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    .input-section button:hover {
      background-color: #1f6f92;
    }

    
table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0 15px; 
  margin: 10px 0;
}

table, th, td {
  border: none;
}

th, td {
  padding: 10px 15px;
  text-align: center;
}

th {
  background-color: #5e97bd;
  color: white;
  font-size: 1.0rem;
  
}

tr {
  background-color: white;
  box-shadow: 0 4px 8px rgba(54, 41, 41, 0.1);
  border-radius: 10px; 

}

td {
  background-color: white; 
  color: #2c3e50;
  font-size: 1rem;
}

tr:hover {
  transform: translateY(-5px); 
  transition: transform 0.2s ease;
}


.loading {
  font-size: 1rem;
  font-weight: 100;
  color: #2980b9;
}

    .logo {
    display: flex; 
    justify-content: center; 
    align-items: center;
    margin-bottom: 10px;
    padding: 10px; 
    }
    .logo img {
        max-width: 60%; 
        height: auto; 
        display: block; 
    }
    .table-grid {
    display: flex;
    justify-content: space-between; 
    align-items: flex-start;
    gap: 20px; 
    margin: 20px;
}

.forcast, .chatbot {
    height: 500px;
    width: 48%; 
    background: rgba(255, 255, 255, 0.1); 
    color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s, box-shadow 0.3s;
    overflow-y: auto; 
    border-color:#f5f6fa;
}


.forcast h3, .chatbot h3 {
    margin-bottom: 15px; 
    font-size: 1.5rem; 
    color: #ffffff;
    text-align: center;
}

.forcast:hover, .chatbot:hover {
    transform: translateY(-5px); 
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
}

.table-grid table {
    width: 100%; 
    border-collapse: collapse; 
    border-radius: 20%;
}

.table-grid th, .table-grid td {
    padding: 10px;
    text-align: left;
    height: 50px;
     
}

.table-grid th {
    background-color: #2980b9; 
    color: white; 
    font-weight: 600;
    
}

.table-grid td {
    background-color: #f9f9f9; 
    border-bottom: 1px solid #645858; 
    height: 68px;
    
}


@media (max-width: 768px) {
    .table-grid {
        flex-direction: column; 
        align-items: center; 
    }

    .forcast, .chatbot {
        width: 90%; 
        margin: 10px 0; 
    }
}
.forcast {
    position: relative; 
}

.dropdown-content {
    display: none; 
    position: absolute; 
    background-color: white;
    border-radius: 8px; 
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    z-index: 1;
    margin-top: 5px; 
    width: 180px; 
    transition: all 0.3s ease; 
}


.dropdown-content button {
    display: block;
    width: 100%;
    padding: 12px;
    border: none;
    background-color: white;
    color: #333;
    cursor: pointer;
    text-align: left;
    font-size: 14px; 
    border-bottom: 1px solid #eee; 
}


.dropdown-content button:last-child {
    border-bottom: none;
}


.dropdown-content button:hover {
    background-color: #e6f7ff; 
    color: #007bff; 
    transform: scale(1.02); 
    transition: all 0.2s ease; 
}


.dropdown-content button:focus {
    outline: none; 
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.5); 
}


@media (max-width: 768px) {
    body {
        flex-direction: column; 
    }

    .side-menu {
        width: 100%; 
        height: auto; 
    }

    .main-content {
        width: 100%;
        padding: 10px; 
    }

    .input-section {
        flex-direction: column; 
        align-items: center;
        margin-bottom: 20px; 
    }

    .input-section input {
        width: 100%; 
        margin-bottom: 10px; 
    }

    .table-grid {
        flex-direction: column; 
        align-items: center; 
    }

    .forcast, .chatbot {
        width: 90%; 
        margin: 10px 0; 
        height: auto; 
    }

    .dropdown-content {
        width: 100%; 
    }

  
    table {
        width: 100%; 
        font-size: 14px; 
    }

    th, td {
        padding: 8px;
    }
}

@media (max-width: 768px) {
    body {
        flex-direction: column; 
    }

    .side-menu {
        width: 100%; 
        height: auto; 
        position: relative; 
    }

    .main-content {
        width: 100%; 
        padding: 10px; 
        order: 1; 
    }

   
    .side-menu nav ul {
        display: none; 
    }

    
    .side-menu.active nav ul {
        display: block;
    }

  
    .menu-toggle {
        display: block; 
        background: #2c3e50;
        color: white;
        padding: 10px;
        border: none;
        cursor: pointer;
        font-size: 1.2rem;
        margin: 20px 0; 
        border-radius: 5px; 
        width: 100%;
    }

    
    .input-section {
        flex-direction: column; 
        align-items: center; 
        margin-bottom: 20px;
    }

    .input-section input {
        width: 100%; 
        margin-bottom: 10px; 
    }

    .table-grid {
        flex-direction: column; 
        align-items: center;
    }

    .forcast, .chatbot {
        width: 90%; 
        margin: 10px 0; 
        height: auto;
    }

    .dropdown-content {
        width: 100%;
    }

    /* Table styles */
    table {
        width: 100%;
        font-size: 14px; 
    }

    th, td {
        padding: 8px; 
    }
}
 /* Chatbot Styles */
 .chatbot .chat-container {
      height: 370px;
      overflow-y: auto;
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 20px;
      color: #2c3e50;
      
    }
    .chatbot .chat-message {
      margin: 10px 0;
      font-size: 0.9rem;
    }
    .chatbot .bot-message {
      background-color: #e0f7fa;
      border-radius: 8px;
      padding: 10px;
      color: #00796b;
    }
    .chatbot .user-message {
      background-color: #fff9c4;
      border-radius: 8px;
      padding: 10px;
      color: #795548;
      text-align: right;
    }
    .chatbot input {
      width: calc(100% - 80px);
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 0.9rem;
    }
    .chatbot button {
      padding: 10px;
      border: none;
      background-color: #3e829f;
      color: white;
      font-size: 0.9rem;
      cursor: pointer;
      border-radius: 4px;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    #chatInput {
        margin: 10px;
    }
  </style>
</head>
<body>
 

<div class="side-menu">
  
  <div class="logo">
      <img src="assets/Logo.png" alt="Weather App Logo" class="logo" />
  </div>
  <nav>
      <ul>
          <li><a href="index.html">Dashboard</a></li>
          <li><a href="tablepage.html">Tables</a></li>
      </ul>
  </nav>
</div>



  
  <div class="main-content">
    <div class="input-section">
        <input type="text" id="cityInput" placeholder="Enter City Name">
        <button id="getWeather">Get Weather</button>
    </div>
    
    <div class="table-grid">
      <div class="forcast">
        <h3>
            Forecast
            <button id="filterBtn" style="margin-left: 10px;">Filter</button>
        </h3>
        <div id="filterDropdown" class="dropdown-content" style="display: none;">
            <button id="filterRain">Filter Rain</button>
            <button id="filterSunny">Filter Sunny</button>
            <button id="filterAsc">Sort Ascending</button> 
            <button id="filterDesc">Sort Descending</button> 
            <button id="filterMaxTemp">Maximum Temperature</button>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Temperature (°C)</th>
                    <th>Weather Condition</th>
                </tr>
            </thead>
            <tbody id="weatherTableBody">
                
            </tbody>
        </table>
    </div>
    <div class="chatbot">
        <h3>Weather Chatbot</h3>
        <div class="chat-container" id="chatContainer"></div>
        <input type="text" id="chatInput" placeholder="Ask about weather...">
        <button onclick="handleChat()">Send</button>
    </div>
    </div>
</div>


<script>
  let originalWeatherData = []; 
  
  document.getElementById('getWeather').addEventListener('click', () => {
      const city = document.getElementById('cityInput').value;
  
      if (city === "") {
          alert("Please enter a city name.");
          return;
      }
  
      const apiKey = '7538c6665df8d8805bf7f078dbc0cb49';  
      const url = `https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${apiKey}&units=metric`;
  
      fetch(url)
          .then(response => {
              if (!response.ok) {
                  throw new Error("City not found");
              }
              return response.json();
          })
          .then(data => {
              originalWeatherData = []; 
              const tableBody = document.getElementById('weatherTableBody');
              tableBody.innerHTML = '';  
  
             
              for (let i = 0; i < data.list.length; i += 8) {
                  const forecast = data.list[i];
                  const date = forecast.dt_txt.split(" ")[0];
                  const temp = forecast.main.temp;
                  const weather = forecast.weather[0].description;
  
                  originalWeatherData.push({ date, temp, weather }); 
  
                  const row = `<tr>
                      <td>${date}</td>
                      <td>${temp.toFixed(1)} °C</td>
                      <td>${weather}</td>
                  </tr>`;
  
                  tableBody.insertAdjacentHTML('beforeend', row);
              }
          })
          .catch(error => {
              console.error('Error fetching weather data:', error);
              document.getElementById('weatherTableBody').innerHTML = `
                  <tr>
                      <td colspan="3" style="text-align: center;">City not found. Please try again.</td>
                  </tr>`;
          });
  });
  
  function handleChat() {
      const input = document.getElementById('chatInput').value;
      if (input === '') return;
  
      displayMessage(input, 'user-message');
      document.getElementById('chatInput').value = '';
  
      const response = processIntent(input.toLowerCase());
      displayMessage(response, 'bot-message');
    }
  
    function processIntent(input) {
      if (input.includes('highest')) {
        const maxTemp = Math.max(...originalWeatherData.map(data => data.temp));
        return `The highest temperature in the forecast is ${maxTemp.toFixed(1)} °C.`;
      } else if (input.includes('lowest')) {
        const minTemp = Math.min(...originalWeatherData.map(data => data.temp));
        return `The lowest temperature in the forecast is ${minTemp.toFixed(1)} °C.`;
      } else if (input.includes('average')) {
        const avgTemp = originalWeatherData.reduce((sum, data) => sum + data.temp, 0) / originalWeatherData.length;
        return `The average temperature in the forecast is ${avgTemp.toFixed(1)} °C.`;
      } else if (input.includes('weather today')) {
        const today = new Date().toISOString().split('T')[0];
        const todayForecast = originalWeatherData.find(data => data.date === today);
        return todayForecast ? 
               `Today's weather is ${todayForecast.weather} with a temperature of ${todayForecast.temp.toFixed(1)} °C.` :
               `No weather data available for today.`;
      } else if (input.includes('weather tomorrow')) {
        const tomorrow = new Date(Date.now() + 86400000).toISOString().split('T')[0];
        const tomorrowForecast = originalWeatherData.find(data => data.date === tomorrow);
        return tomorrowForecast ? 
               `Tomorrow's weather is ${tomorrowForecast.weather} with a temperature of ${tomorrowForecast.temp.toFixed(1)} °C.` :
               `No weather data available for tomorrow.`;
      } else {
        return "I'm here to answer weather-related questions only. Try asking about the highest, lowest, or average temperatures, or the weather for today or tomorrow.";
      }
    }
  
    function displayMessage(text, className) {
      const container = document.getElementById('chatContainer');
      const message = document.createElement('div');
      message.className = `chat-message ${className}`;
      message.innerText = text;
      container.appendChild(message);
      container.scrollTop = container.scrollHeight;
    }


  document.getElementById('filterBtn').addEventListener('click', () => {
      const dropdown = document.getElementById('filterDropdown');
      dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none'; 
  });

  document.getElementById('filterAsc').addEventListener('click', () => {
    const sortedData = [...originalWeatherData].sort((a, b) => a.temp - b.temp); 
    populateTable(sortedData);
});
  
document.getElementById('filterDesc').addEventListener('click', () => {
    const sortedData = [...originalWeatherData].sort((a, b) => b.temp - a.temp); 
    populateTable(sortedData);
});


document.getElementById('filterMaxTemp').addEventListener('click', () => {
    const maxTempDay = originalWeatherData.reduce((max, current) => (current.temp > max.temp ? current : max), originalWeatherData[0]);
    populateTable([maxTempDay]);
});

  
document.getElementById('filterRain').addEventListener('click', () => {
    
    const nonRainyData = originalWeatherData.filter(forecast => !forecast.weather.includes('rain'));
    populateTable(nonRainyData); 
});

  
 
  document.getElementById('filterSunny').addEventListener('click', () => {
      const sunnyData = originalWeatherData.filter(forecast => forecast.weather.includes('clear') || forecast.weather.includes('sunny'));
      populateTable(sunnyData);
  });
  
  
  function populateTable(data) {
      const tableBody = document.getElementById('weatherTableBody');
      tableBody.innerHTML = ''; 
  
    
      if (data.length === 0) {
          tableBody.innerHTML = `
              <tr>
                  <td colspan="3" style="text-align: center;">No data found.</td>
              </tr>`;
          return;
      }
  
      data.forEach(forecast => {
          const row = `<tr>
              <td>${forecast.date}</td>
              <td>${forecast.temp.toFixed(1)} °C</td>
              <td>${forecast.weather}</td>
          </tr>`;
          tableBody.insertAdjacentHTML('beforeend', row);
      });
  }
  
  </script>
</body>
</html>




